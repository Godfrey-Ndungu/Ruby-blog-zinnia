<%# app/views/dashboard/index.html.erb %>

<div class="container mx-auto p-6">
  <h1 class="text-3xl font-bold mb-6">Dashboard</h1>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
    <div class="p-4 bg-white shadow rounded-lg">
      <h2 class="text-xl font-semibold mb-2">Total Authors</h2>
      <p class="text-2xl"><%= @authors.count %></p>
    </div>
    <div class="p-4 bg-white shadow rounded-lg">
      <h2 class="text-xl font-semibold mb-2">Total Articles</h2>
      <p class="text-2xl"><%= @articles.count %></p>
    </div>
    <div class="p-4 bg-white shadow rounded-lg">
      <h2 class="text-xl font-semibold mb-2">Total Likes</h2>
      <p class="text-2xl"><%= @total_likes %></p>
    </div>
  </div>

  <div class="mb-6">
    <h2 class="text-2xl font-semibold mb-4">Top 3 Articles with Comments</h2>
    <div class="space-y-4">
      <% @top_articles.each do |article| %>
        <div class="p-4 bg-white shadow rounded-lg">
          <h3 class="text-xl font-bold"><%= link_to article.title, article_path(article) %></h3>
          <p class="text-gray-600 mb-2">By <%= article.author.full_name %> | <%= article.comments.count %> Comments</p>
          <div class="mt-4">
            <h4 class="text-lg font-semibold">Comments:</h4>
            <ul class="list-disc ml-5">
              <% article.comments.each do |comment| %>
                <li><%= comment.body %> - <span class="text-gray-500"><%= comment.user.email %></span></li>
              <% end %>
            </ul>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
